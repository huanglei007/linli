(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/from/trash"],{8096:function(e,i,t){},a5c3:function(e,i,t){"use strict";t.r(i);var n=t("c20c"),o=t.n(n);for(var a in n)"default"!==a&&function(e){t.d(i,e,(function(){return n[e]}))}(a);i["default"]=o.a},c20c:function(e,i,t){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){t.e("components/changeAddresss").then(function(){return resolve(t("0f15"))}.bind(null,t)).catch(t.oe)},o={components:{pickerAddress:n},props:["list"],data:function(){return{htosp:0,imageValue:[],buyAdd:{},isAddress:!1,addIndex:"buyAdd",timeList:[],timeIndex:0,formdata:{categoryId:2,goodsValuation:"",publisherSex:0,leaveMessage:"",publisherName:"",publisherPhone:"",delivery_date:"",deliveryStartTime:"",deliveryEndTime:"",now_delivery:0},couponform:{},couponlist:[],commission:0,radio_time:0,arr_time:[{text:"两小时内",value:"0"},{text:"立即上门",value:"1"}],onoff:!0}},mounted:function(i){this.htosp=e.getStorageSync("htop"),this.userId=e.getStorageSync("userId");var t=this;this.util.ajax("release/throwGarbageCycleList",{},(function(e){t.timeList=e.data.list,t.couponform.amount||(t.commission=t.timeList[t.timeIndex].commission)}))},watch:{list:function(e,i){var t=this;e.length>0&&setTimeout((function(){t.screenEvent(e)}),1e3)},radio_time:function(e,i){var t=this;1==e?t.commission+=1:t.commission-=1},commission:function(e,i){this.commission=Number(e.toFixed(2))}},methods:{cancel:function(){this.isAddress=!1},bindPickerChange:function(e){var i=this;i.index=e.target.value,this.screenEvent(i.list),0==i.radio_time?i.couponform.amount?i.commission=i.timeList[e.target.value].commission-i.couponform.amount:i.commission=i.timeList[e.target.value].commission:i.couponform.amount?i.commission=i.timeList[e.target.value].commission+1-i.couponform.amount:i.commission=i.timeList[e.target.value].commission+1},changeAdd:function(e){this[this.addIndex]=e,this.isAddress=!1},refresh:function(){this.isAddress&&this.$refs.add.refresh()},addImg:function(){this.util.sendimage(5-this.imageValue.length,this.imageValue)},del:function(e){this.imageValue.splice(e,1)},radioChange:function(e){for(var i=this,t=0;t<i.arr_time.length;t++)i.arr_time[t].value==e.detail.value&&(i.radio_time=t,i.formdata.now_delivery=t)},initTime:function(){var e=this;e.formdata.deliveryStartTime=this.$shijian((new Date).getTime()).split(" ")[1],e.formdata.deliveryEndTime=this.$shijian((new Date).getTime()+72e5).split(" ")[1],e.formdata.delivery_date=this.$shijian(new Date).split(" ")[0]},screenEvent:function(e){var i=this;i.couponlist=[];for(var t=0;t<e.length;t++)i.timeList[i.timeIndex].commission>=e[t].min_order_amount&&0==e[t].use_status&&i.couponlist.push(e[t])},selectEvent:function(){var i=this;if(i.couponlist.length>0){var t=i.timeList[i.timeIndex],n="?price="+t.commission;i.couponform.amount&&(n=n+"&coup_id="+i.couponform.id),e.navigateTo({url:"/pagesA/a_myWelfare"+n,events:{acceptDataFromOpenedPage:function(e){0==i.radio_time?e.data?(i.couponform=e.data,i.commission=t.commission-e.data.amount):(i.couponform={},i.commission=t.commission):e.data?(i.couponform=e.data,i.commission=t.commission+1-e.data.amount):(i.couponform={},i.commission=t.commission+1)}}})}},submit:function(){if(!this.disable){if(this.disable=!0,!this.buyAdd.address)return this.$alert("请选择丢垃圾地址"),void(this.disable=!1);if(!this.imageValue.length)return this.$alert("请上传截图"),void(this.disable=!1);this.initTime();var i=this;i.$refs.form.validate().then((function(t){e.showLoading({title:""});var n=t;n.publisherName=i.buyAdd.name,n.publisherPhone=i.buyAdd.phone,n.categoryId=i.formdata.categoryId,n.publisherSex=i.formdata.publisherSex,n.leaveMessage=i.formdata.leaveMessage,n.images=i.imageValue.join(),n.addressId=i.buyAdd.id,n.cycleId=i.timeList[i.timeIndex].id,n.commission=i.commission,n.couponId=i.couponform.id,n.userId=i.userId,n.delivery_date=i.formdata.delivery_date,n.deliveryStartTime=i.formdata.deliveryStartTime,n.deliveryEndTime=i.formdata.deliveryEndTime,n.now_delivery=i.formdata.now_delivery,i.util.ajax("release/saveRelease",n,(function(t){var n=4;i.util.ajax("pay/toPay",{orderId:t.data.id,orderNum:t.data.orderNum,payType:1,paymentType:n,purpose:2,subject:"发布需求",userId:i.userId},(function(t){e.hideLoading(),e.requestPayment({provider:"wxpay",timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.packageValue,signType:"MD5",paySign:t.data.paySign,success:function(e){i.$alert("支付成功"),i.disable=!1,setTimeout((function(){i.$jumpLa("/pages/user/myOrder/myOrder?type=0")}),1e3)},fail:function(e){i.remark=e,i.$alert("支付失败"),i.disable=!1}})}))}))})).catch((function(e){i.disable=!1}))}}}};i.default=o}).call(this,t("543d")["default"])},de02:function(e,i,t){"use strict";var n=t("8096"),o=t.n(n);o.a},deeb:function(e,i,t){"use strict";t.d(i,"b",(function(){return o})),t.d(i,"c",(function(){return a})),t.d(i,"a",(function(){return n}));var n={uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,"d623"))}},o=function(){var e=this,i=e.$createElement,t=(e._self._c,e.__map(e.imageValue,(function(i,t){var n=e.__get_orig(i),o=e.Img(i);return{$orig:n,m0:o}})));e._isMounted||(e.e0=function(i){e.addIndex="buyAdd",e.isAddress=!0}),e.$mp.data=Object.assign({},{$root:{l0:t}})},a=[]},ece9:function(e,i,t){"use strict";t.r(i);var n=t("deeb"),o=t("a5c3");for(var a in o)"default"!==a&&function(e){t.d(i,e,(function(){return o[e]}))}(a);t("de02");var s,r=t("f0c5"),d=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);i["default"]=d.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/from/trash-create-component',
    {
        'pages/from/trash-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("ece9"))
        })
    },
    [['pages/from/trash-create-component']]
]);
