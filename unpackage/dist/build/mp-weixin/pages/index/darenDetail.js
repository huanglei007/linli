(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/darenDetail"],{"3ce0":function(e,t,n){"use strict";var i=n("ef2e"),r=n.n(i);r.a},"5f8c":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.Img(e.info.photo)),i=e.__map(e.List,(function(t,n){var i=e.__get_orig(t),r=e.Img(t.images),a=t.market_price.toString().split("."),o=t.market_price.toString().indexOf("."),s=t.market_price.toString().split(".");return{$orig:i,m1:r,g0:a,g1:o,g2:s}})),r=e.__map(e.welfareList,(function(t,n){var i=e.__get_orig(t),r=e.$shijiandate(t.begin_time),a=e.$shijiandate(t.expiration_time),o=e.getwel(t);return{$orig:i,m2:r,m3:a,m4:o}}));e.$mp.data=Object.assign({},{$root:{m0:n,l0:i,l1:r}})},a=[]},7608:function(e,t,n){"use strict";(function(e){n("a943"),n("33db");i(n("66fd"));var t=i(n("f560"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"859b":function(e,t,n){"use strict";n.r(t);var i=n("9af9"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},"9af9":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("f2ca"));function r(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={data:function(){var e;return e={imageurl:"",htosp:0,userId:"",typeList:["服务项目","服务内容"],typeIndex:0,isBottom:!1,List:[],ListIndex:0,categoryVos:[],welfareList:[],info:{address:"",business_hours:"",contact_phone:"",distance:"",images:"",score:0,service_content:"",service_guarantee:"",service_process:"",shop_id:0,photo:"",talent_name:"",user_id:0},getPro:new Map,sumPrice:0},o(e,"ListIndex",0),o(e,"id",0),o(e,"onoff",!0),e},onLoad:function(t){if(this.htosp=e.getStorageSync("htop"),this.userId=e.getStorageSync("userId"),this.imageurl=this.globalData.imageurl,t.id){this.id=t.id;var n=this;this.util.ajax("talent/talentContentDetail",{talentId:t.id,userId:this.userId},(function(e){n.categoryVos=e.data.categoryVos,n.categoryVos.length>0&&(n.List=e.data.categoryVos[0].productVos),n.ListIndex=0,n.info=e.data.info,n.welfareList=e.data.welfareList}))}},onPageScroll:function(e){e.scrollTop<this.bottomTop-10&&(this.isBottom=!1),this.isBottom&&(this.bottomTop=e.scrollTop)},onReachBottom:function(){this.isBottom=!0},methods:{test:function(e){this.typeIndex=e},collect:function(){var e=this;this.util.ajax("collection/addCollect",{infoId:this.id,type:2,userId:this.userId},(function(t){e.$alert("收藏成功"),e.info.collected=!e.info.collected}))},changeType:function(e){this.typeIndex=e.detail.current},changeList:function(e){this.ListIndex=e;var t=this.categoryVos[e].productVos;this.List=t},phone:function(t){e.makePhoneCall({phoneNumber:t})},onShare:function(){var e=this,t={shareUrl:"/pages/index/darenDetail?id="+this.id,shareTitle:this.info.talent_name,shareContent:this.info.talent_phone,shareImg:this.Img(this.info.photo),appId:"wx6ae9f157d9b35d24",appPath:"/pages/index/darenDetail?id="+this.id},n=(0,i.default)(t,(function(t){e.$alter("分享成功"),(0,i.closeShare)()}));setTimeout((function(){n.close()}),5e3)},talkto:function(e){e&&(console.log(this.userId,e),e!=this.userId?this.$jump("/pages/chat/HM-chat?idse="+e):this.$alert("无法和自己聊天"))},getwel:function(t){var n=this;if(!t.received){var i=this;this.util.ajax("userWelfare/receiveWelfare",{userId:this.userId,welfare_id:t.id,welfare_type:t.welfare_type},(function(r){2==t.welfare_type?(n.$alert("领取成功"),t.received=1):1==t.welfare_type&&i.util.ajax("pay/toPay",{orderId:r.data.orderId,orderNum:r.data.orderNum,payType:1,paymentType:3,purpose:3,subject:"购买代金券",userId:i.userId},(function(t){e.requestPayment({provider:"wxpay",orderInfo:{appid:response.appid,noncestr:response.noncestr,package:response.package,partnerid:response.partnerid,prepayid:response.prepayid,timestamp:response.timestamp,sign:response.sign},success:function(e){i.$alert("支付成功"),setTimeout((function(){i.jumpHome()}),1e3)},fail:function(e){i.remark=e,i.$alert("支付失败"),i.loadmore()}})}))}))}}}};t.default=s}).call(this,n("543d")["default"])},ef2e:function(e,t,n){},f560:function(e,t,n){"use strict";n.r(t);var i=n("5f8c"),r=n("859b");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("3ce0");var o,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=c.exports}},[["7608","common/runtime","common/vendor"]]]);