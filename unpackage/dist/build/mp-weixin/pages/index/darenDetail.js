(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/darenDetail"],{"22aa":function(e,t,n){"use strict";(function(e){n("56c5"),n("33db");r(n("66fd"));var t=r(n("884d"));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"29fe":function(e,t,n){},"80e9":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("62c0"));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={data:function(){var e;return e={imageurl:"",htosp:0,userId:"",typeList:["服务项目","服务内容"],typeIndex:0,isBottom:!1,List:[],ListIndex:0,categoryVos:[],welfareList:[],info:{address:"",business_hours:"",contact_phone:"",distance:"",images:"",score:0,service_content:"",service_guarantee:"",service_process:"",shop_id:0,photo:"",talent_name:"",user_id:0},getPro:new Map,sumPrice:0},a(e,"ListIndex",0),a(e,"id",0),a(e,"onoff",!0),e},onLoad:function(t){if(this.htosp=e.getStorageSync("htop"),this.userId=e.getStorageSync("userId"),this.imageurl=this.globalData.imageurl,t.id){this.id=t.id;var n=this;this.util.ajax("talent/talentContentDetail",{talentId:t.id,userId:this.userId},(function(e){n.categoryVos=e.data.categoryVos,n.categoryVos.length>0&&(n.List=e.data.categoryVos[0].productVos),n.ListIndex=0,n.info=e.data.info,n.welfareList=e.data.welfareList}))}},onPageScroll:function(e){e.scrollTop<this.bottomTop-10&&(this.isBottom=!1),this.isBottom&&(this.bottomTop=e.scrollTop)},onReachBottom:function(){this.isBottom=!0},methods:{test:function(e){this.typeIndex=e},collect:function(){var e=this;this.util.ajax("collection/addCollect",{infoId:this.id,type:2,userId:this.userId},(function(t){e.$alert("收藏成功"),e.info.collected=!e.info.collected}))},changeType:function(e){this.typeIndex=e.detail.current},changeList:function(e){this.ListIndex=e;var t=this.categoryVos[e].productVos;this.List=t},phone:function(t){e.makePhoneCall({phoneNumber:t})},onShare:function(){var e=this,t={shareUrl:"https://kemean.com/",shareTitle:this.info.talent_name,shareContent:this.info.talent_phone,shareImg:this.Img(this.info.photo),appId:"wx6ae9f157d9b35d24",appPath:"/pages/index/darenDetail?id="+this.id},n=(0,r.default)(t,(function(t){e.$alter("分享成功"),(0,r.closeShare)()}));setTimeout((function(){n.close()}),5e3)},talkto:function(e){e&&(console.log(this.userId,e),e!=this.userId?this.$jump("/pages/chat/HM-chat?idse="+e):this.$alert("无法和自己聊天"))},getwel:function(t){var n=this;if(!t.received){var r=this;this.util.ajax("userWelfare/receiveWelfare",{userId:this.userId,welfare_id:t.id,welfare_type:t.welfare_type},(function(i){2==t.welfare_type?(n.$alert("领取成功"),t.received=1):1==t.welfare_type&&r.util.ajax("pay/toPay",{orderId:i.data.orderId,orderNum:i.data.orderNum,payType:1,paymentType:3,purpose:3,subject:"购买代金券",userId:r.userId},(function(t){e.requestPayment({provider:"wxpay",orderInfo:{appid:response.appid,noncestr:response.noncestr,package:response.package,partnerid:response.partnerid,prepayid:response.prepayid,timestamp:response.timestamp,sign:response.sign},success:function(e){r.$alert("支付成功"),setTimeout((function(){r.jumpHome()}),1e3)},fail:function(e){r.remark=e,r.$alert("支付失败"),r.loadmore()}})}))}))}}}};t.default=s}).call(this,n("543d")["default"])},"87d0":function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.Img(e.info.photo)),r=e.__map(e.List,(function(t,n){var r=e.__get_orig(t),i=e.Img(t.images),o=t.market_price.toString().split("."),a=t.market_price.toString().indexOf("."),s=t.market_price.toString().split(".");return{$orig:r,m1:i,g0:o,g1:a,g2:s}})),i=e.__map(e.welfareList,(function(t,n){var r=e.__get_orig(t),i=e.$shijiandate(t.begin_time),o=e.$shijiandate(t.expiration_time),a=e.getwel(t);return{$orig:r,m2:i,m3:o,m4:a}}));e.$mp.data=Object.assign({},{$root:{m0:n,l0:r,l1:i}})},o=[]},"884d":function(e,t,n){"use strict";n.r(t);var r=n("87d0"),i=n("95bc");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("99f6");var a,s=n("f0c5"),c=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);t["default"]=c.exports},"95bc":function(e,t,n){"use strict";n.r(t);var r=n("80e9"),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},"99f6":function(e,t,n){"use strict";var r=n("29fe"),i=n.n(r);i.a}},[["22aa","common/runtime","common/vendor"]]]);