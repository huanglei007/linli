(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/addressManage"],{"17fa":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.is_default^=1})},s=[]},"2a21":function(t,e,a){"use strict";(function(t){a("a943"),a("33db");i(a("66fd"));var e=i(a("b3b6"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=a,t(e.default)}).call(this,a("543d")["createPage"])},"3a44":function(t,e,a){},"8b5f":function(t,e,a){"use strict";var i=a("3a44"),n=a.n(i);n.a},"96fa":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){Promise.all([a.e("common/vendor"),a.e("components/wangding-pickerAddres/wangding-pickerAddress")]).then(function(){return resolve(a("8952"))}.bind(null,a)).catch(a.oe)},n={components:{pickerAddress:i},data:function(){return{htosp:0,imageurl:"",username:"",phone:"",street:"",is_default:0,txt:"省市区县、乡镇等",id:0,prov_id:0,city_id:0,area_id:0,location:{point:{longitude:22.22222,latitude:22.22222},address:"请选择地图定位",name:"请选择地图定位"},geted:!1}},onLoad:function(e){if(this.htosp=t.getStorageSync("htop"),this.userId=t.getStorageSync("userId"),this.imageurl=this.globalData.imageurl,e.id){t.setNavigationBarTitle({title:"修改地址"}),this.id=e.id;var a=this;this.util.ajax("address/queryAddressById",{id:a.id},(function(t){a.username=t.data.name,a.phone=t.data.phone,a.is_default=t.data.is_default,a.location={point:{longitude:t.data.longitude,latitude:t.data.latitude},address:t.data.address,name:t.data.address_abbreviation},a.geted=!0,a.street=t.data.address_detail}))}},onShow:function(){},methods:{change:function(t){this.txt=t.data.join(" "),this.prov_id=t.index[0],this.city_id=t.index[1],this.area_id=t.index[2]},phonechange:function(t,e){var a=this;switch(e){case"phone":setTimeout((function(){a.phone=t.target.value}),0)}},streetchange:function(t,e){var a=this;switch(e){case"street":setTimeout((function(){a.street=t.target.value}),0)}},onChooseLocation2:function(){var e=this;t.getLocation({type:"gcj02",geocode:!0,success:function(a){t.chooseLocation({latitude:a.latitude,longitude:a.longitude,keyword:a.address?a.address.city+a.address.district+a.address.street:"",success:function(t){e.geted=!0,e.location={point:{longitude:t.longitude,latitude:t.latitude},address:t.address,name:t.name}}})},fail:function(t){plus.nativeUI.toast("读取当前地理位置失败")}})},onChooseLocation:function(){t.navigateTo({url:"/pages/chooselocation/index"})},tijiao:function(){if(""!=this.username)if(""!=this.phone)if(11==this.phone.length)if("省市区县、乡镇等"!=this.txt&&""!=this.street){var t=this,e=this.txt.split(" "),a="";a=e[0]!=e[1]?e[0]+"省"+e[1]+"市"+e[2]:e[1]+"市"+e[2];var i=a+t.street;t.util.ajax("address/queryLatitudeAndLongitudeByAddress",{address:i},(function(e){var i=e.data.addressMap.geocodes[0];0!=t.id?t.util.ajax("address/updateAddress",{id:t.id,isDefault:t.is_default,name:t.username,phone:t.phone,userId:t.userId,longitude:i.location.split(",")[0],latitude:i.location.split(",")[1],address:t.txt,addressDetail:t.street,address_abbreviation:a},(function(e){t.$alert(e.msg),t.$emit("refresh"),t.$jumpback()})):t.util.ajax("address/addAddress",{isDefault:t.is_default,name:t.username,phone:t.phone,userId:t.userId,longitude:i.location.split(",")[0],latitude:i.location.split(",")[1],address:t.txt,addressDetail:t.street,address_abbreviation:a},(function(e){t.$alert("保存地址成功"),setTimeout((function(){t.$jumpback()}),1e3)}));var n=t.getOpenerEventChannel();n.emit("acceptDataFromOpenedPage",!0)}))}else this.$alert("请填写所在地区与详细地址");else this.$alert("请正确填写收货人手机号码");else this.$alert("请填写收货人手机号码");else this.$alert("请填写收货人姓名")}}};e.default=n}).call(this,a("543d")["default"])},a868:function(t,e,a){"use strict";a.r(e);var i=a("96fa"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},b3b6:function(t,e,a){"use strict";a.r(e);var i=a("17fa"),n=a("a868");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("8b5f");var d,o=a("f0c5"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],d);e["default"]=r.exports}},[["2a21","common/runtime","common/vendor"]]]);