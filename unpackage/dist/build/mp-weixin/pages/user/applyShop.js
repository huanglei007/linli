(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/applyShop"],{1529:function(e,t,i){"use strict";(function(e){i("56c5"),i("33db");a(i("66fd"));var t=a(i("5b7f"));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i("543d")["createPage"])},"481d":function(e,t,i){"use strict";i.r(t);var a=i("62f4"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"5b7f":function(e,t,i){"use strict";i.r(t);var a=i("664b"),n=i("481d");for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("b527");var s,r=i("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);t["default"]=d.exports},"62f4":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){i.e("components/timePicker").then(function(){return resolve(i("ee6b"))}.bind(null,i)).catch(i.oe)},n=function(){Promise.all([i.e("common/vendor"),i.e("components/wangding-pickerAddres/wangding-pickerAddress")]).then(function(){return resolve(i("347e"))}.bind(null,i)).catch(i.oe)},o={components:{pickerAddress:n,timePicker:a},data:function(){var e=6,t=e+1;return{imageurl:"",userId:"",htosp:0,imageValue:[],typeList:[],typeIndex:0,saleType:[],saleIndex:0,operation:[],operationIndex:0,starTime:e,starTime2:t,location:{point:{longitude:22.22222,latitude:22.22222},address:"请选择地图定位",name:"请选择地图定位"},geted:!1,formdata:{shopName:"",contactName:"",contactPhone:"",houseNumber:"",serviceBeginTime:"08:00",serviceEndTime:"21:00"},deposit_index:0,deposit_arr:[{text:"不交押金",value:"0"},{text:"交押金",value:"1"}],deposit_array_index:0,deposit_array:[]}},onShow:function(){var t=this;e.$once("location",(function(e){t.location=e}))},onLoad:function(){this.htosp=e.getStorageSync("htop"),this.userId=e.getStorageSync("userId"),this.imageurl=this.globalData.imageurl,this.getShopType(0),this.getShopType(1),this.getOperation()},methods:{getShopType:function(e){var t=this;this.util.ajax("shop/getShopTypeList",{parentId:0,secondType:e},(function(i){0==e?t.typeList=i.data.list:t.saleType=i.data.list}))},getOperation:function(){var e=this;this.util.ajax("common/operationPointList",{},(function(t){e.operation=e.operation.concat(t.data.list)}))},radioChange:function(e){var t=this;t.deposit_index=e.detail.value,"1"==e.detail.value&&this.util.ajax("shop/queryShopDepositSet",{},(function(e){t.deposit_array=e.data.list}))},depositChange:function(e){console.log(e),this.deposit_array_index=e.detail.value},bindPickerChange2:function(e){this.typeIndex=e.target.value},bindPickerChange3:function(e){this.saleIndex=e.target.value},bindPickerChange4:function(e){this.operationIndex=e.target.value},bindTimeChange:function(e){this.formdata.serviceBeginTime=e,this.updatestarTime()},updatestarTime:function(){var e=this.formdata.serviceBeginTime.split(":");this.starTime2=parseInt(e[0])+1,parseInt(this.formdata.serviceEndTime.split(":")[0])<=this.starTime2&&(this.formdata.serviceEndTime=this.starTime2+":00"),this.$forceUpdate()},bindTimeChange2:function(e){this.formdata.serviceEndTime=e},onChooseLocation:function(){e.navigateTo({url:"/pages/chooselocation/index"})},onChooseLocation2:function(){var t=this;e.getLocation({type:"gcj02",geocode:!0,success:function(i){e.chooseLocation({latitude:i.latitude,longitude:i.longitude,keyword:i.address?i.address.city+i.address.district+i.address.street:"",success:function(e){t.geted=!0,t.location={point:{longitude:e.longitude,latitude:e.latitude},address:e.address,name:e.name}}})},fail:function(e){plus.nativeUI.toast("读取当前地理位置失败")}})},addImg:function(){this.util.sendimage(1-this.imageValue.length,this.imageValue)},del:function(e){this.imageValue.splice(e,1)},apply:function(){var t=this;if(""!=this.formdata.shopName)if(this.location.address)if(""!=this.formdata.houseNumber)if(""!=this.formdata.contactName)if(""!=this.formdata.contactPhone)if(0!=this.imageValue.length){var i=this.formdata;i.address=this.location.address,i.businessLicense=this.imageValue[0],i.contactName=this.formdata.contactName,i.contactPhone=this.formdata.contactPhone,i.houseNumber=this.formdata.houseNumber,i.latitude=this.location.point.latitude,i.longitude=this.location.point.longitude,i.operationPointId=this.operation[this.operationIndex].id,i.serviceBeginTime=this.formdata.serviceBeginTime,i.serviceEndTime=this.formdata.serviceEndTime,i.shopName=this.formdata.shopName,i.shopSubTypeId=this.saleType[this.saleIndex].id,i.shopTypeId=this.typeList[this.typeIndex].id,i.userId=this.userId;var a=this;e.showLoading({title:""}),this.util.ajax("shop/saveShopSettled",i,(function(i){"1"==t.deposit_index?t.util.ajax("shop/submitShopDepositOrder",{amount:a.deposit_array[a.deposit_array_index].amount,userId:a.userId},(function(t){var i=4;a.util.ajax("pay/toPay",{orderNum:t.data.order_num,payType:1,paymentType:i,purpose:5,subject:"押金",userId:a.userId},(function(t){e.hideLoading(),e.requestPayment({provider:"wxpay",timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.packageValue,signType:"MD5",paySign:t.data.paySign,success:function(e){a.$alert("提交成功"),setTimeout((function(){a.$jumpback()}),1e3)},fail:function(e){a.$alert("支付失败")}})}))})):(a.$alert("提交成功"),setTimeout((function(){a.$jumpback()}),1e3))}))}else this.$alert("请上传营业执照");else this.$alert("请输入联系人电话");else this.$alert("请输入联系人姓名");else this.$alert("请输入店铺门牌号");else this.$alert("请选择地址");else this.$alert("请输入店铺名称")}}};t.default=o}).call(this,i("543d")["default"])},"664b":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=(e._self._c,e.__map(e.imageValue,(function(t,i){var a=e.__get_orig(t),n=e.Img(t);return{$orig:a,m0:n}})));e.$mp.data=Object.assign({},{$root:{l0:i}})},o=[]},"712d":function(e,t,i){},b527:function(e,t,i){"use strict";var a=i("712d"),n=i.n(a);n.a}},[["1529","common/runtime","common/vendor"]]]);