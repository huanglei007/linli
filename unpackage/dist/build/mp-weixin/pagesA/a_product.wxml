<view class="product"><view class="product-search"><uni-search-bar vue-id="1f4b6bce-1" radius="{{15}}" cancelButton="none" placeholder="搜索商品名称" bgColor="#F5F5F5" data-event-opts="{{[['^confirm',[['inputEvent']]]]}}" bind:confirm="__e" bind:__l="__l"></uni-search-bar></view><view class="product-list"><view class="searchType"><block wx:for="{{statusList}}" wx:for-item="data" wx:for-index="i" wx:key="i"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({data})}}" class="{{['item',statusIndex==data.isvalid?'active':'']}}" bindtap="__e">{{''+data.status+''}}<image class="icon" src="/static/img/icon_xuanzhong.png" mode="widthFix"></image></view></block></view><view class="product-list-box"><view class="type"><block wx:for="{{shopType}}" wx:for-item="d" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" data-event-params="{{({index})}}" class="{{['type-list',shopTypeIndex==index?'active':'']}}" bindtap="__e"><text>{{d.category_name}}</text><image hidden="{{!(shopTypeIndex==index&&statusIndex==1)}}" class="edit" src="/static/image/icon_update.png" mode data-event-opts="{{[['tap',[['shopTypeHandlePop',['edit','$0'],[[['shopType','',index,'category_name']]]]]]]}}" bindtap="__e"></image><image hidden="{{!(shopTypeIndex==index)}}" class="delete" src="/static/img/icon_delete.png" mode data-event-opts="{{[['tap',[['shopTypeHandlePop',['delete']]]]]}}" bindtap="__e"></image></view></block><view hidden="{{!(statusIndex==1)}}"><view data-event-opts="{{[['tap',[['shopTypeHandlePop',['add']]]]]}}" class="type-list new-type" bindtap="__e"><image class="icon32" src="/static/img/icon_+.png" mode></image><text>新建分类</text></view></view></view><block wx:if="{{shopType[shopTypeIndex]}}"><view class="right-box"><block wx:if="{{!shopType[shopTypeIndex].productVos[0]}}"><view class="fontColor-ccc noData"><text>暂无</text></view></block><block wx:else><view class="product-box"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block><block wx:if="{{statusIndex==item.$orig.isvalid}}"><view class="products"><view data-event-opts="{{[['tap',[['openImagePop',[index]]]]]}}" class="product-logo" bindtap="__e"><image class="logo" src="{{item.$orig.images?item.g0[0]:item.m0}}" mode></image><block wx:if="{{item.$orig.stock<1&&item.$orig.id}}"><view class="black"><text>售罄</text></view></block></view><view class="product-news"><input type="text" placeholder="{{'请输入'+(userinfo.user_type==3?'商品':'服务')+'名称'}}" placeholder-class="placeholder" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],[[['shopType.'+shopTypeIndex+'.productVos','',index]]]]]]]}}" value="{{item.$orig.name}}" bindinput="__e"/><view class="stock"><text>库存</text><view data-event-opts="{{[['tap',[['stockEvent',['del',index]]]]]}}" class="del" catchtap="__e">-</view><input class="input" type="number" data-event-opts="{{[['input',[['__set_model',['$0','stock','$event',[]],[[['shopType.'+shopTypeIndex+'.productVos','',index]]]]]]]}}" value="{{item.$orig.stock}}" bindinput="__e"/><view data-event-opts="{{[['tap',[['stockEvent',['add',index]]]]]}}" class="add" catchtap="__e">+</view></view><block><block wx:if="{{!input_price||index!=input_index}}"><view data-event-opts="{{[['tap',[['priceSubClick',[true,index]]]]]}}" class="price_sub price-input" bindtap="__e"><text>{{item.$orig.selling_price}}</text></view></block><block wx:else><input class="price-input" type="digit" focus="{{inputFocus_price}}" placeholder="请输入商品价格" placeholder-class="placeholder" data-event-opts="{{[['input',[['checkNum',['$event',index]]]]]}}" bindinput="__e"/></block></block><view class="meth"><view class="sale"><text class="font22">{{"月销 "+(item.$orig.month_sale?item.$orig.month_sale:0)}}</text></view><block wx:if="{{statusIndex!=3}}"><view class="handel"><text data-event-opts="{{[['tap',[['productPopEvent',['delete',index]]]]]}}" class="delete" bindtap="__e">删除</text><block wx:if="{{statusIndex==1}}"><text data-event-opts="{{[['tap',[['productPopEvent',['shelf',index]]]]]}}" class="shelf" bindtap="__e">下架</text></block><block wx:else><block wx:if="{{statusIndex==2}}"><text data-event-opts="{{[['tap',[['productPopEvent',['upshelf',index]]]]]}}" class="shelf" bindtap="__e">上架</text></block></block></view></block></view></view></view></block></block></block></view></block></view></block><view class="foot-box flexd"><block wx:if="{{shopType[shopTypeIndex]}}"><view data-event-opts="{{[['tap',[['$shake',['$0'],['saveEvent']]]]]}}" class="foot-save" bindtap="__e"><text>保存</text></view></block><view data-event-opts="{{[['tap',[['productHandle',['add']]]]]}}" class="foot-add" bindtap="__e"><image class="icon32" src="/static/img/icon_+.png" mode></image><text>添加商品</text></view></view></view></view><uni-popup class="vue-ref" vue-id="1f4b6bce-2" type="center" data-ref="typePopup" bind:__l="__l" vue-slots="{{['default']}}"><view class="type-popup"><block wx:if="{{handleIndex=='add'}}"><view class="popup-add"><view class="title"><text class="font36">新增分类</text></view><view class="valuebox"><input class="product-search-input" placeholder="请输入分类名称" data-event-opts="{{[['input',[['__set_model',['','addVal','$event',[]]]]]]}}" value="{{addVal}}" bindinput="__e"/></view></view></block><block wx:else><block wx:if="{{handleIndex=='edit'}}"><view class="popup-edit"><view class="title"><text class="font36">修改分类</text></view><view class="valuebox"><input class="product-search-input" placeholder="请输入分类名称" data-event-opts="{{[['input',[['__set_model',['','editVal','$event',[]]]]]]}}" value="{{editVal}}" bindinput="__e"/></view></view></block><block wx:else><view class="popup-delete"><view class="deleteText"><text class="font36">确定删除该分类?</text></view></view></block></block><view class="type-popup-submit"><button class="cancel" type="primary" data-event-opts="{{[['tap',[['cancelEvent_type',['$event']]]]]}}" bindtap="__e">取消</button><view style="width:2rpx;background-color:#F6F6F6;"></view><button class="confirm" type="primary" data-event-opts="{{[['tap',[['confimeEvent_type',['$event']]]]]}}" bindtap="__e">确定</button></view></view></uni-popup><uni-popup class="vue-ref" vue-id="1f4b6bce-3" type="center" data-ref="productPopup" bind:__l="__l" vue-slots="{{['default']}}"><view class="product-popup"><view class="title"><block wx:if="{{productShelf=='delete'}}"><text class="font36">确定删除该商品?</text></block><block wx:else><block wx:if="{{productShelf=='shelf'}}"><text class="font36">确定下架该商品?</text></block><block wx:else><text class="font36">确定上架该商品?</text></block></block></view><view class="product-popup-submit"><button class="cancel" type="primary" data-event-opts="{{[['tap',[['cancelEvent_type_product',['$event']]]]]}}" bindtap="__e">取消</button><view style="width:2rpx;background-color:#F6F6F6;"></view><button class="confirm" type="primary" data-event-opts="{{[['tap',[['confimeEvent_type_product',['$event']]]]]}}" bindtap="__e">确定</button></view></view></uni-popup><uni-popup class="vue-ref" vue-id="1f4b6bce-4" type="bottom" background-color="#fff" data-ref="imgaesPopup" bind:__l="__l" vue-slots="{{['default']}}"><view class="imgaes-box"><view class="box-head flexd jubetween"><text data-event-opts="{{[['tap',[['closeImagePop',['$event']]]]]}}" bindtap="__e">取消</text><text data-event-opts="{{[['tap',[['confirmImagePop',['$event']]]]]}}" bindtap="__e">确认</text></view><view class="box-body flexd"><block wx:for="{{imageValue_index}}" wx:for-item="url" wx:for-index="index" wx:key="index"><view class="body-images"><block wx:if="{{url}}"><block><image src="{{url}}" mode></image><image class="del-icon icon32" src="/static/image/icon_jian.png" mode data-event-opts="{{[['tap',[['imagesDel',[index]]]]]}}" bindtap="__e"></image></block></block></view></block><block wx:if="{{imageValue_index.length<6}}"><block><image src="/static/image/icon_tj.png" mode data-event-opts="{{[['tap',[['updateImg',['$event']]]]]}}" bindtap="__e"></image></block></block></view></view></uni-popup></view>